<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2022. 6. 9. 채영</title>
<link rel="shortcut icon" type="image/x-icon" href="../images/Sist.ico">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

</head>
<body>
<h3>ex04_03 js클로저</h3>
<button onclick="incCounter()">counter 증가</button>
<p id ="demo"></p>
<!-- <script>
//중첩함수 이해
  document.getElementById("demo").innerHTML = add();
  
  function add(){
	 let counter=0; 
	 
	 //counter +=1; //1씩증가  => add()함수 안에 함수 선언
	 function plus(){
		 //중첩함수 plus 안에서 상위함수의 지역변수 접근 가능
		 counter +=1;
	 }
	 plus();
	 
	 return counter;
 }

</script> -->
<script> 
  //js 함수 클로저
  //자체 호출 함수 + 중첩함수
  //return 중첩함수;
  var add = (function(){
				  let counter =0; //지역변수 -> 전역변수처럼 유지(바깥에서는 사용x)
				  return function(){
					  counter +=1;
					  return counter;
				  } //중첩함수  
			  })();

  function incCounter(){
	  document.getElementById("demo").innerHTML = add();
	  //자체호출함수 안에 있는 중첩함수를 호출해서 리턴값인 counter를 가져오겠다.
  }
   //                                             폐쇄 + 전역변수 갑 보존(클로저)
  //counter 변수는 익명함수 안에 선언된 지역변수 -> 익명함수 외에는 접근 x
  //                     안의 중첩함수 안에서 사용할 수 있고 + 상태가 전역변수처럼 유지됨
  
  //??  그냥 counter 전역변수 쓰면 되는데 왜 굳이 클로저?
		  //다른데서는 증가못하고 add를 통해서만 증가시키기 위해
</script>

</body>
</html>